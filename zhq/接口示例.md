# å‰åç«¯ API å¯¹æ¥å®Œæ•´æŒ‡å—

## ğŸ“‹ ç›®å½•
- [è¯·æ±‚åŸºç¡€](#è¯·æ±‚åŸºç¡€)
- [è¯·æ±‚æµç¨‹](#è¯·æ±‚æµç¨‹)
- [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
- [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## è¯·æ±‚åŸºç¡€

### API è¯·æ±‚çš„é€šç”¨ç»“æ„

```javascript
uni.request({
  url: string,           // å®Œæ•´çš„ API åœ°å€
  method: string,        // è¯·æ±‚æ–¹æ³•ï¼šGETã€POSTã€PUTã€DELETE
  header: object,        // è¯·æ±‚å¤´ï¼ˆåŒ…å« tokenã€content-type ç­‰ï¼‰
  data: object,          // è¯·æ±‚ä½“ï¼ˆPOSTã€PUT æ—¶ä½¿ç”¨ï¼‰
  success: function,     // æˆåŠŸå›è°ƒ
  fail: function,        // å¤±è´¥å›è°ƒ
  complete: function     // å®Œæˆå›è°ƒ
})
```

### é€šç”¨å“åº”æ ¼å¼

åç«¯ç»Ÿä¸€è¿”å›æ ¼å¼ï¼š

```json
{
  "code": 0,                    // ä¸šåŠ¡ç ï¼š0 è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºå¤±è´¥
  "message": "success",         // å“åº”ä¿¡æ¯
  "data": {                     // å®é™…æ•°æ®
    "list": [],
    "total": 10,
    // ... å…¶ä»–å­—æ®µ
  }
}
```

---

## è¯·æ±‚æµç¨‹

### 1ï¸âƒ£ å‘èµ·è¯·æ±‚ï¼ˆå‡†å¤‡é˜¶æ®µï¼‰

```javascript
// è·å–å¿…è¦ä¿¡æ¯
const token = uni.getStorageSync('token');  // ä»æœ¬åœ°å­˜å‚¨è·å– token
const userId = uni.getStorageSync('user_id'); // è·å–ç”¨æˆ· ID

// æ„å»ºè¯·æ±‚é…ç½®
const requestConfig = {
  url: '${global.API_BASE_URL}/api/v1/teams',
  method: 'GET',
  header: {
    'Authorization': `Bearer ${token}`,     // è®¤è¯ä»¤ç‰Œ
    'Content-Type': 'application/json'      // å†…å®¹ç±»å‹
  }
};
```

**å‚æ•°è§£é‡Šï¼š**

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `url` | string | å®Œæ•´çš„ API åœ°å€ | `${global.API_BASE_URL}/api/v1/teams` |
| `method` | string | HTTP æ–¹æ³• | `GET`ã€`POST`ã€`PUT`ã€`DELETE` |
| `header` | object | è¯·æ±‚å¤´ | `{ 'Authorization': 'Bearer xxx' }` |
| `data` | object | è¯·æ±‚ä½“ï¼ˆPOST/PUTï¼‰ | `{ name: 'test' }` |

### 2ï¸âƒ£ å‘é€è¯·æ±‚ï¼ˆæ‰§è¡Œé˜¶æ®µï¼‰

```javascript
async function getTeamList() {
  try {
    const res = await uni.request({
      url: '${global.API_BASE_URL}/api/v1/teams',
      method: 'GET',
      header: {
        'Authorization': `Bearer ${uni.getStorageSync('token')}`
      }
    });

    // âš ï¸ é‡è¦ï¼šuni.request è¿”å›çš„æ˜¯æ•°ç»„æ ¼å¼ [err, res]
    // å¦‚æœä½¿ç”¨ async/awaitï¼Œerr ä¼šè‡ªåŠ¨å¤„ç†åˆ° catch å—
    
    return res.data;  // è·å–å“åº”æ•°æ®
  } catch (err) {
    console.error('è¯·æ±‚å¤±è´¥:', err);
    throw err;  // æŠ›å‡ºé”™è¯¯ä¾›ä¸Šå±‚å¤„ç†
  }
}
```

### 3ï¸âƒ£ å¤„ç†å“åº”ï¼ˆå¤„ç†é˜¶æ®µï¼‰

```javascript
async function getTeamList() {
  try {
    const res = await uni.request({
      url: '${global.API_BASE_URL}/api/v1/teams',
      method: 'GET'
    });

    const result = res.data;  // è·å–å“åº”ä½“

    // ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥ä¸šåŠ¡ç 
    if (result.code === 0) {
      // âœ… æˆåŠŸï¼šcode = 0
      console.log('è·å–æˆåŠŸ:', result.data);
      return result.data;
    } else {
      // âŒ å¤±è´¥ï¼šcode != 0
      const errorMsg = result.message || 'æœªçŸ¥é”™è¯¯';
      console.error('ä¸šåŠ¡é”™è¯¯:', errorMsg);
      uni.showToast({
        title: errorMsg,
        icon: 'none'
      });
      return null;
    }
  } catch (err) {
    // ç½‘ç»œé”™è¯¯æˆ–å…¶ä»–å¼‚å¸¸
    console.error('ç½‘ç»œé”™è¯¯:', err);
    uni.showToast({
      title: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•',
      icon: 'none'
    });
    return null;
  }
}
```

### 4ï¸âƒ£ ä½¿ç”¨æ•°æ®ï¼ˆåº”ç”¨é˜¶æ®µï¼‰

```javascript
async function loadTeams() {
  uni.showLoading({ title: 'åŠ è½½ä¸­...' });
  
  try {
    const data = await getTeamList();
    
    if (data) {
      this.mockData = data.list || [];
      this.total = data.total || 0;
    }
  } finally {
    uni.hideLoading();
  }
}
```

---

## å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¸âƒ£ï¼šGET è¯·æ±‚ï¼ˆè·å–æ•°æ®ï¼‰

**ç‰¹ç‚¹ï¼š**
- åªè¯»æ“ä½œ
- æ²¡æœ‰è¯·æ±‚ä½“
- å‚æ•°é€šè¿‡ URL æˆ–æŸ¥è¯¢å­—ç¬¦ä¸²ä¼ é€’

```javascript
async function getUserProfile() {
  try {
    const res = await uni.request({
      url: '${global.API_BASE_URL}/api/v1/user/profile',
      method: 'GET',
      header: {
        'Authorization': `Bearer ${uni.getStorageSync('token')}`
      }
    });

    const result = res.data;
    if (result.code === 0) {
      console.log('ç”¨æˆ·ä¿¡æ¯:', result.data.user);
      return result.data.user;
    }
  } catch (err) {
    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err);
  }
}
```

### åœºæ™¯ 2ï¸âƒ£ï¼šPOST è¯·æ±‚ï¼ˆåˆ›å»º/æäº¤æ•°æ®ï¼‰

**ç‰¹ç‚¹ï¼š**
- ä¼šä¿®æ”¹æœåŠ¡å™¨æ•°æ®
- æœ‰è¯·æ±‚ä½“
- é€šè¿‡ `data` å­—æ®µä¼ é€’å‚æ•°

```javascript
async function updateUserProfile(profileData) {
  try {
    const res = await uni.request({
      url: '${global.API_BASE_URL}/api/v1/user/profile',
      method: 'POST',
      header: {
        'Authorization': `Bearer ${uni.getStorageSync('token')}`,
        'Content-Type': 'application/json'  // å£°æ˜å‘é€ JSON æ•°æ®
      },
      data: {
        nickname: profileData.nickname,
        gender: profileData.gender,
        phone: profileData.phone
      }
    });

    const result = res.data;
    if (result.code === 0) {
      uni.showToast({
        title: 'æ›´æ–°æˆåŠŸ',
        icon: 'success'
      });
      return result.data;
    } else {
      uni.showToast({
        title: result.message || 'æ›´æ–°å¤±è´¥',
        icon: 'none'
      });
    }
  } catch (err) {
    console.error('æ›´æ–°å¤±è´¥:', err);
    uni.showToast({
      title: 'ç½‘ç»œé”™è¯¯',
      icon: 'none'
    });
  }
}
```

### åœºæ™¯ 3ï¸âƒ£ï¼šæ–‡ä»¶ä¸Šä¼ ï¼ˆmultipart/form-dataï¼‰

**ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ `uni.uploadFile` è€Œä¸æ˜¯ `uni.request`
- ä¸“é—¨ç”¨äºæ–‡ä»¶ä¸Šä¼ 
- ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® Content-Typeï¼ˆä¼šè‡ªåŠ¨è®¾ç½®ä¸º multipart/form-dataï¼‰

```javascript
async function uploadResume(file) {
  try {
    const token = uni.getStorageSync('token');

    // ä½¿ç”¨ uploadFile è€Œä¸æ˜¯ request
    const res = await uni.uploadFile({
      url: '${global.API_BASE_URL}/api/v1/user/uploadResume',
      filePath: file.path || file.tempFilePath,  // æ–‡ä»¶è·¯å¾„
      name: 'file',                               // åç«¯æ¥æ”¶çš„å­—æ®µå
      header: {
        'Authorization': `Bearer ${token}`
      },
      formData: {
        // é¢å¤–çš„ form å­—æ®µ
        fileName: file.name,
        fileSize: file.size
      }
    });

    const result = JSON.parse(res.data);
    if (result.code === 0) {
      uni.showToast({
        title: 'ä¸Šä¼ æˆåŠŸ',
        icon: 'success'
      });
      return result.data;
    } else {
      uni.showToast({
        title: result.message || 'ä¸Šä¼ å¤±è´¥',
        icon: 'none'
      });
    }
  } catch (err) {
    console.error('ä¸Šä¼ å¤±è´¥:', err);
    uni.showToast({
      title: 'ä¸Šä¼ å¤±è´¥',
      icon: 'none'
    });
  }
}
```

### åœºæ™¯ 4ï¸âƒ£ï¼šDELETE è¯·æ±‚ï¼ˆåˆ é™¤æ•°æ®ï¼‰

**ç‰¹ç‚¹ï¼š**
- åˆ é™¤æ“ä½œ
- å¯èƒ½åŒ…å«æŸ¥è¯¢å‚æ•°
- ä¸€èˆ¬æ²¡æœ‰è¯·æ±‚ä½“

```javascript
async function deleteResume(resumeId) {
  try {
    const res = await uni.request({
      url: `${global.API_BASE_URL}/api/v1/user/resume/${resumeId}`,
      method: 'DELETE',
      header: {
        'Authorization': `Bearer ${uni.getStorageSync('token')}`
      }
    });

    const result = res.data;
    if (result.code === 0) {
      uni.showToast({
        title: 'åˆ é™¤æˆåŠŸ',
        icon: 'success'
      });
      // åˆ·æ–°åˆ—è¡¨
      await getResumeList();
    } else {
      uni.showToast({
        title: result.message || 'åˆ é™¤å¤±è´¥',
        icon: 'none'
      });
    }
  } catch (err) {
    console.error('åˆ é™¤å¤±è´¥:', err);
  }
}
```

### åœºæ™¯ 5ï¸âƒ£ï¼šPUT è¯·æ±‚ï¼ˆæ›´æ–°æ•°æ®ï¼‰

**ç‰¹ç‚¹ï¼š**
- æ›´æ–°æ“ä½œ
- æœ‰å®Œæ•´çš„è¯·æ±‚ä½“

```javascript
async function updateTeamInfo(teamId, updateData) {
  try {
    const res = await uni.request({
      url: `${global.API_BASE_URL}/api/v1/teams/${teamId}`,
      method: 'PUT',
      header: {
        'Authorization': `Bearer ${uni.getStorageSync('token')}`,
        'Content-Type': 'application/json'
      },
      data: updateData
    });

    const result = res.data;
    if (result.code === 0) {
      uni.showToast({
        title: 'æ›´æ–°æˆåŠŸ',
        icon: 'success'
      });
      return result.data;
    }
  } catch (err) {
    console.error('æ›´æ–°å¤±è´¥:', err);
  }
}
```

---

## é”™è¯¯å¤„ç†

### HTTP çŠ¶æ€ç é”™è¯¯

| çŠ¶æ€ç  | å«ä¹‰ | å¤„ç†æ–¹å¼ |
|--------|------|---------|
| 200 | è¯·æ±‚æˆåŠŸ | æ£€æŸ¥ `code` å­—æ®µåˆ¤æ–­ä¸šåŠ¡é€»è¾‘æ˜¯å¦æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å‘é€çš„æ•°æ®æ ¼å¼ |
| 401 | æœªæˆæƒï¼ˆæ—  token æˆ– token è¿‡æœŸï¼‰ | è·³è½¬åˆ°ç™»å½•é¡µé¢é‡æ–°ç™»å½• |
| 403 | ç¦æ­¢è®¿é—®ï¼ˆæƒé™ä¸è¶³ï¼‰ | æ˜¾ç¤ºæƒé™ä¸è¶³æç¤º |
| 404 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡® |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æ˜¾ç¤ºåç«¯é”™è¯¯ä¿¡æ¯ |

### å®Œæ•´çš„é”™è¯¯å¤„ç†ç¤ºä¾‹

```javascript
async function apiRequest(config) {
  try {
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    uni.showLoading({ title: 'åŠ è½½ä¸­...' });

    // è·å– token
    const token = uni.getStorageSync('token');
    if (!token) {
      // æ²¡æœ‰ tokenï¼Œè·³è½¬åˆ°ç™»å½•
      uni.navigateTo({ url: '/pages/login/login' });
      return null;
    }

    // å‘èµ·è¯·æ±‚
    const res = await uni.request({
      ...config,
      header: {
        ...config.header,
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      }
    });

    const result = res.data;

    // æ£€æŸ¥ä¸šåŠ¡ç 
    if (result.code === 0) {
      // âœ… æˆåŠŸ
      return result.data;
    } else if (result.code === 401) {
      // âš ï¸ token è¿‡æœŸï¼Œé‡æ–°ç™»å½•
      uni.removeStorageSync('token');
      uni.removeStorageSync('user_id');
      uni.navigateTo({ url: '/pages/login/login' });
      return null;
    } else {
      // âŒ å…¶ä»–ä¸šåŠ¡é”™è¯¯
      uni.showToast({
        title: result.message || 'æ“ä½œå¤±è´¥',
        icon: 'none'
      });
      return null;
    }
  } catch (err) {
    // ç½‘ç»œé”™è¯¯
    console.error('è¯·æ±‚é”™è¯¯:', err);
    uni.showToast({
      title: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥',
      icon: 'none'
    });
    return null;
  } finally {
    // éšè—åŠ è½½çŠ¶æ€
    uni.hideLoading();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
async function getTeams() {
  const data = await apiRequest({
    url: '${global.API_BASE_URL}/api/v1/teams',
    method: 'GET'
  });
  
  if (data) {
    this.teams = data.list;
  }
}
```

---

## æœ€ä½³å®è·µ

### 1ï¸âƒ£ åˆ›å»º API æœåŠ¡å±‚

å°†æ‰€æœ‰ API è¯·æ±‚é›†ä¸­ç®¡ç†ï¼š

```javascript
// api/user.js
export const userApi = {
  // è·å–ç”¨æˆ·ä¿¡æ¯
  getProfile() {
    return uni.request({
      url: '${global.API_BASE_URL}/api/v1/user/profile',
      method: 'GET'
    });
  },

  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  updateProfile(data) {
    return uni.request({
      url: '${global.API_BASE_URL}/api/v1/user/profile',
      method: 'POST',
      data
    });
  },

  // ä¸Šä¼ å¤´åƒ
  uploadAvatar(filePath) {
    return uni.uploadFile({
      url: '${global.API_BASE_URL}/api/v1/user/avatar',
      filePath,
      name: 'avatar'
    });
  },

  // ä¸Šä¼ ç®€å†
  uploadResume(filePath, fileName) {
    return uni.uploadFile({
      url: '${global.API_BASE_URL}/api/v1/user/uploadResume',
      filePath,
      name: 'file',
      formData: { fileName }
    });
  }
};
```

### 2ï¸âƒ£ åˆ›å»ºè¯·æ±‚æ‹¦æˆªå™¨

åœ¨ main.js ä¸­æ·»åŠ è¯·æ±‚æ‹¦æˆªé€»è¾‘ï¼š

```javascript
// utils/request.js
export function setupRequest() {
  const token = uni.getStorageSync('token');
  
  // æ‹¦æˆªè¯·æ±‚
  uni.$u.http.interceptors.request.use((config) => {
    // æ·»åŠ  token
    if (token) {
      config.header.Authorization = `Bearer ${token}`;
    }
    return config;
  });

  // æ‹¦æˆªå“åº”
  uni.$u.http.interceptors.response.use((response) => {
    if (response.data.code === 401) {
      // token è¿‡æœŸï¼Œé‡æ–°ç™»å½•
      uni.navigateTo({ url: '/pages/login/login' });
    }
    return response;
  });
}
```

### 3ï¸âƒ£ ç¯å¢ƒå˜é‡ç®¡ç†

ä¸ºä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„ API åŸºç¡€ URLï¼š

```javascript
// config/api.js
export const API_BASE_URL = process.env.NODE_ENV === 'production'
  ? 'https://api.example.com'
  : '${global.API_BASE_URL}';

export const API = {
  teams: `${API_BASE_URL}/api/v1/teams`,
  userProfile: `${API_BASE_URL}/api/v1/user/profile`,
  uploadResume: `${API_BASE_URL}/api/v1/user/uploadResume`
};

// ä½¿ç”¨
async function getTeams() {
  const res = await uni.request({
    url: API.teams,
    method: 'GET'
  });
}
```

### 4ï¸âƒ£ å¤„ç†åŠ è½½å’Œé”™è¯¯çŠ¶æ€

```javascript
data() {
  return {
    teams: [],
    loading: false,
    error: null,
    empty: false
  };
}

methods: {
  async loadTeams() {
    this.loading = true;
    this.error = null;
    this.empty = false;

    try {
      const res = await uni.request({
        url: '${global.API_BASE_URL}/api/v1/teams',
        method: 'GET'
      });

      const result = res.data;
      if (result.code === 0) {
        this.teams = result.data.list || [];
        this.empty = this.teams.length === 0;
      } else {
        this.error = result.message || 'è·å–å¤±è´¥';
      }
    } catch (err) {
      this.error = 'ç½‘ç»œé”™è¯¯';
    } finally {
      this.loading = false;
    }
  }
}

// åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨
// <view v-if="loading">åŠ è½½ä¸­...</view>
// <view v-if="error">{{ error }}</view>
// <view v-if="empty">æš‚æ— æ•°æ®</view>
// <view v-if="teams.length > 0">
//   <view v-for="team in teams">{{ team.name }}</view>
// </view>
```

---

## è¯·æ±‚å“åº”æµç¨‹å›¾

```
å‰ç«¯è¯·æ±‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å‡†å¤‡è¯·æ±‚                          â”‚
â”‚    - è·å– token                      â”‚
â”‚    - æ„å»º header                     â”‚
â”‚    - å‡†å¤‡ data                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å‘é€è¯·æ±‚                          â”‚
â”‚    - uni.request() æˆ– uploadFile()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. åç«¯å¤„ç†                          â”‚
â”‚    - è®¤è¯éªŒè¯                       â”‚
â”‚    - ä¸šåŠ¡é€»è¾‘å¤„ç†                    â”‚
â”‚    - æ•°æ®åº“æ“ä½œ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¿”å›å“åº”                          â”‚
â”‚    - HTTP 200                        â”‚
â”‚    - JSON æ ¼å¼                       â”‚
â”‚    - codeã€messageã€data å­—æ®µ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å‰ç«¯å¤„ç†å“åº”                      â”‚
â”‚    - æ£€æŸ¥ HTTP çŠ¶æ€ç                 â”‚
â”‚    - æ£€æŸ¥ code å­—æ®µ                 â”‚
â”‚    - æ˜¾ç¤ºæˆåŠŸ/å¤±è´¥æç¤º               â”‚
â”‚    - æ›´æ–° UI                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆè¿”å› 401ï¼Ÿ
**A:** è®¤è¯å¤±è´¥ï¼Œå¯èƒ½åŸå› ï¼š
- æ²¡æœ‰ä¼ é€’ token
- token æ ¼å¼é”™è¯¯
- token å·²è¿‡æœŸ
- æ£€æŸ¥ header ä¸­çš„ Authorization å­—æ®µæ˜¯å¦æ­£ç¡®

### Q: ä¸ºä»€ä¹ˆè¿”å› 404ï¼Ÿ
**A:** è·¯ç”±ä¸å­˜åœ¨ï¼Œå¯èƒ½åŸå› ï¼š
- URL åœ°å€é”™è¯¯
- åç«¯è·¯ç”±æ²¡æœ‰æ³¨å†Œ
- è¯·æ±‚æ–¹æ³•ï¼ˆGET/POSTï¼‰ä¸åŒ¹é…

### Q: ä¸Šä¼ æ–‡ä»¶æ—¶ä¸ºä»€ä¹ˆå¤±è´¥ï¼Ÿ
**A:** æ–‡ä»¶ä¸Šä¼ å¸¸è§é—®é¢˜ï¼š
- ä½¿ç”¨ `uni.uploadFile` è€Œä¸æ˜¯ `uni.request`
- æ£€æŸ¥ `filePath` æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ `name` å­—æ®µï¼ˆåç«¯æ¥æ”¶çš„å­—æ®µåï¼‰
- æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶

### Q: å¦‚ä½•å¤„ç† token è¿‡æœŸï¼Ÿ
**A:** åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼š
```javascript
if (result.code === 401) {
  // æ¸…é™¤æœ¬åœ° token
  uni.removeStorageSync('token');
  // è·³è½¬åˆ°ç™»å½•
  uni.navigateTo({ url: '/pages/login/login' });
}
```

---

## æ€»ç»“

| ç¯èŠ‚ | å…³é”®ç‚¹ |
|------|--------|
| **å‡†å¤‡** | è·å– tokenï¼Œæ„å»ºè¯·æ±‚å¤´ |
| **å‘é€** | é€‰æ‹©æ­£ç¡®çš„æ–¹æ³•ï¼ˆrequest/uploadFileï¼‰ |
| **å¤„ç†** | å…ˆæ£€æŸ¥ HTTP çŠ¶æ€ç ï¼Œå†æ£€æŸ¥ code å­—æ®µ |
| **åº”ç”¨** | æ›´æ–° UIï¼Œæ˜¾ç¤ºåŠ è½½/é”™è¯¯çŠ¶æ€ |
| **é”™è¯¯** | å¤„ç† 401ã€404ã€500 ç­‰å¸¸è§é”™è¯¯ |
